var $calcContainer,$photoBlock,$sliderNav;import{log,el,els,ev,imgWithWebp,makeObserveble}from"/js/ksk-lib.js";import{$options,current}from"/js/shirts-options.js";import{store}from"/js/store.js";$calcContainer=el("#shirts>div:last-child"),$photoBlock=el("#shirts-photo>div"),$sliderNav={next:el(".slider-nav.next",$calcContainer),prev:el(".slider-nav.prev",$calcContainer)},current.addObserver(function(e,t,r){var l,n,o,i,s,a,c,p,d,v,h,u,y;if(h=store.dataFromServer.photos_shirts,"color"===t){for(function(){var e,t,r,l;for(l=[],e=0,t=(r=els("#shirts-photo>div>div")).length;e<t;e++)o=r[e],l.push(o.remove())}(),h=function(){var e,t,r;for(r=[],e=0,t=h.length;e<t;e++)(v=h[e]).density_id===current.density&&v.color_id===current.color&&r.push(v);return r}(),0===(l=function(){var e,t,r;for(r=[],e=0,t=h.length;e<t;e++)v=h[e],r.push(imgWithWebp(v.url_jpg,v.url_webp));return r}()).length&&l.push(imgWithWebp("/images/no-photo-shirt.jpg","/images/no-photo-shirt.webp")),s=document.createElement("div"),c=p=0,d=l.length;p<d;c=++p)(i=l[c]).style.opacity="0",(n=document.createElement("div")).append(i),s.append(n);$photoBlock.append(s),a=document.documentElement.clientWidth,y=a>370?360:300,s.style.width=l.length*y+"px",s.style.left="-0",u=makeObserveble({current:0}),$sliderNav.prev.style.display="none",l[0].style.opacity="1",l.length<2?$sliderNav.next.style.display="none":($sliderNav.next.style.display="block",u.addObserver(function(e,t,r,n){$sliderNav.prev.style.display=r<=0?"none":"block",r>=l.length-1?$sliderNav.next.style.display="none":$sliderNav.next.style.display="block",s.style.left="-"+(0===r?0:r*y)+"px",l[n].style.opacity="0",l[r].style.opacity="1"})),ev($sliderNav.next,"click",function(e){u.current<l.length&&u.current++}),ev($sliderNav.prev,"click",function(e){u.current>0&&u.current--})}});