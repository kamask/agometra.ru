var loadImg,loadPreview;import{log,newEl,ev,el}from"/js/ksk-lib.js";import{initData}from"/js/store.js";loadImg=function(e){var a;return(a=newEl("picture")).innerHTML=`<source srcset="${e.url.replace(/\.jpg$/,"_w360.webp")}" media="(max-width: 480px)" type="image/webp">\n<source srcset="${e.url.replace(/\.jpg$/,"_w360.jpg")}" media="(max-width: 480px)">\n<source srcset="${e.url.replace(/\.jpg$/,"_w800.webp")}" type="image/webp">\n<img src="${e.url.replace(/\.jpg$/,"_w800.jpg")}" alt="${e.desc}" />`,a},loadPreview=function(e){var a;return(a=newEl("picture")).innerHTML=`<source srcset="${e.url.replace(/\.jpg$/,"_w360.webp")}" type="image/webp">\n<img src="${e.url.replace(/\.jpg$/,"_w360.jpg")}" alt="${e.desc}" />`,a},async function(){var e,a,s,l,t,i,n,r,c,p,d;({gallery_agometra:p}=await initData()),p.sort(function(e,a){return e.id-a.id}),c=0,l=el("#gallery_agometra"),(r=newEl("div")).className="slider",l.append(r),(n=newEl("div")).className="previews",a=[],e=[],(t=newEl("span")).className="next",t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" viewBox="0 0 17 16"><path d="M9 16a8 8 0 0 0 8-8a8 8 0 0 0-8-8a8 8 0 0 0-8 8a8 8 0 0 0 8 8zM7 4.154c.186-.205.775-.205.96 0l4.9 3.467a.567.567 0 0 1 0 .745l-4.9 3.48c-.185.205-.774.205-.96 0V4.154z" fill="#eacaaf" fill-rule="evenodd"/></svg>',(i=newEl("span")).className="prev",i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" focusable="false" viewBox="0 0 17 16"><path d="M9 0a8 8 0 0 0-8 8a8 8 0 0 0 8 8a8 8 0 0 0 8-8c0-4.418-3.58-8-8-8zm2 11.846c-.186.205-.774.205-.96 0l-4.9-3.467a.563.563 0 0 1 0-.745l4.9-3.48c.185-.205.773-.205.96 0v7.692z" fill="#eacaaf" fill-rule="evenodd"/></svg>',i.style.opacity="none",s=newEl("div"),l.append(s),s.append(i),s.append(n),s.append(t),p.forEach(function(s,l){var t,i,p;(p=newEl("div")).className="slide",(t=newEl("span")).textContent=s.desc,p.append(t),p.append(loadImg(s)),r.append(p),a.push(p),(i=newEl("div")).append(loadPreview(s)),n.append(i),e.push(i),l===c&&(p.classList.add("show"),i.classList.add("current"))}),ev(t,"click",function(){c<a.length-1&&(e[c].classList.remove("current"),a[c].classList.remove("show"),a[c].classList.add("hide"),a[++c].classList.add("show"),e[c].classList.add("current"),c===a.length-1&&(this.style.opacity="0"),"0"===i.style.opacity&&(i.style.opacity="1"),d())}),ev(i,"click",function(){c>0&&(e[c].classList.remove("current"),a[c--].classList.remove("show"),a[c].classList.remove("hide"),a[c].classList.add("show"),e[c].classList.add("current"),0===c&&(this.style.opacity="0"),"0"===t.style.opacity&&(t.style.opacity="1"),d())}),d=function(){var a,s,l,t;(t=110*e.length-n.offsetWidth)>0&&(a=110*(c+1)-50,s=n.offsetWidth/2,e[0].style.marginLeft="",a>s&&((l=a-s)>t&&(l=t),e[0].style.marginLeft="-"+l+"px"))}}();